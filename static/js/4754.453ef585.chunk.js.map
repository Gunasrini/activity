{"version":3,"file":"static/js/4754.453ef585.chunk.js","mappings":"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","sources":["views/app-views/role-master/RoleMaster.js","../node_modules/@ant-design/icons-svg/es/asn/CheckCircleFilled.js","../node_modules/@ant-design/icons/es/icons/CheckCircleFilled.js","../node_modules/@ant-design/icons-svg/es/asn/ExclamationCircleFilled.js","../node_modules/@ant-design/icons/es/icons/ExclamationCircleFilled.js","../node_modules/@ant-design/icons-svg/es/asn/SettingOutlined.js","../node_modules/@ant-design/icons/es/icons/SettingOutlined.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Table, Button, Input, Modal, message, Checkbox, Popconfirm } from 'antd';\r\nimport axios from 'axios';\r\nimport { SettingOutlined } from '@ant-design/icons';\r\nimport './RoleMaster.css';\r\n\r\nconst RoleMaster = () => {\r\n  const [roles, setRoles] = useState([]);\r\n  const [newRoleName, setNewRoleName] = useState('');\r\n  const [editRoleId, setEditRoleId] = useState(null);\r\n  const [editRoleName, setEditRoleName] = useState('');\r\n  const [isAddRoleModalVisible, setIsAddRoleModalVisible] = useState(false);\r\n  const [isPermissionModalVisible, setIsPermissionModalVisible] = useState(false);\r\n  const [menuList, setMenuList] = useState([]);\r\n  const [selectedRole, setSelectedRole] = useState(null);\r\n  const [selectedPermissions, setSelectedPermissions] = useState({});\r\n  const [permissions, setPermissions] = useState([]);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n\r\n  useEffect(() => {\r\n    fetchRoles();\r\n    loadMenuList();\r\n    loadPermissions();\r\n  }, []);\r\n\r\n  const loadPermissions = () => {\r\n    const storedPermissions = JSON.parse(localStorage.getItem('permissions'));\r\n    setPermissions(storedPermissions || []);\r\n  };\r\n\r\n  const hasPermission = (menuId, action) => {\r\n    if (!permissions || permissions.length === 0) {\r\n      return true; // Super admin has all permissions\r\n    }\r\n    const permission = permissions.find((perm) => perm.menu_id === menuId);\r\n    return permission ? permission[action] === 1 : false;\r\n  };\r\n\r\n  const loadMenuList = () => {\r\n    const menu = localStorage.getItem('user_menu');\r\n    if (menu) {\r\n      try {\r\n        const parsedMenu = JSON.parse(menu);\r\n        setMenuList(parsedMenu);\r\n      } catch (error) {\r\n        console.error(\"Error parsing menu:\", error);\r\n      }\r\n    } else {\r\n      console.warn(\"No 'user_menu' found in localStorage.\");\r\n      setMenuList([]);\r\n    }\r\n  };\r\n\r\n  const fetchRoles = async () => {\r\n    try {\r\n      const response = await axios.get('http://159.89.167.135:3000/api/admin/getRole');\r\n      setRoles(response.data.data);\r\n    } catch (error) {\r\n      console.error('Error fetching roles:', error);\r\n    }\r\n  };\r\n\r\n  const handleAddRole = async () => {\r\n    if (!newRoleName.trim()) return;\r\n    try {\r\n      await axios.post('http://159.89.167.135:3000/api/admin/addRole', { role_name: newRoleName });\r\n      message.success('Role added successfully');\r\n      setNewRoleName('');\r\n      setIsAddRoleModalVisible(false);\r\n      fetchRoles();\r\n    } catch (error) {\r\n      if (error.response && error.response.data && error.response.data.message) {\r\n        message.error(error.response.data.message);\r\n      } else {\r\n        message.error('An unexpected error occurred');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleUpdateRole = async () => {\r\n    if (!editRoleName.trim()) return;\r\n    try {\r\n      await axios.put(`http://159.89.167.135:3000/api/admin/updateRole/${editRoleId}`, { role_name: editRoleName });\r\n      message.success('Role updated successfully');\r\n      setEditRoleId(null);\r\n      setEditRoleName('');\r\n      fetchRoles();\r\n    } catch (error) {\r\n      if (error.response && error.response.data && error.response.data.message) {\r\n        message.error(error.response.data.message);\r\n      } else {\r\n        message.error('An unexpected error occurred');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleDeleteRole = async (id) => {\r\n    try {\r\n      await axios.delete(`http://159.89.167.135:3000/api/admin/deleteRole/${id}`);\r\n      message.success('Role deleted successfully');\r\n      fetchRoles();\r\n    } catch (error) {\r\n      message.error('Error deleting role');\r\n    }\r\n  };\r\n\r\n  const handlePermissionChange = (category, action, isSubmenu = false, parentCategory = null) => {\r\n    setSelectedPermissions((prevPermissions) => {\r\n      const newPermissions = { ...prevPermissions };\r\n\r\n      // If it is a submenu, ensure the parent (master) menu is selected first\r\n      if (isSubmenu && parentCategory && !newPermissions[parentCategory]?.view) {\r\n        message.warning(`Please select the master menu \"${parentCategory}\" first.`);\r\n        return newPermissions;\r\n      }\r\n\r\n      // Toggle the permission\r\n      if (!newPermissions[category]) {\r\n        newPermissions[category] = {};\r\n      }\r\n      newPermissions[category][action] = !newPermissions[category][action];\r\n\r\n      // If unselecting a master menu, unselect all its submenus\r\n      if (!newPermissions[category].view && action === 'view' && !isSubmenu) {\r\n        menuList\r\n          .find(menuItem => menuItem.name === category)\r\n          ?.submenu?.forEach(submenu => {\r\n            newPermissions[submenu.name] = { view: false, add: false, edit: false, delete: false };\r\n          });\r\n      }\r\n\r\n      return newPermissions;\r\n    });\r\n  };\r\n\r\n  const openPermissionModal = async (role) => {\r\n    console.log(\"seleted role\", role);\r\n    setSelectedRole(role);\r\n    try {\r\n      const response = await axios.get(`http://159.89.167.135:3000/api/admin/getRolePermissions/${role.id}`);\r\n      setSelectedPermissions(response.data.permissions || {});\r\n    } catch (error) {\r\n      console.error(\"Error loading permissions:\", error);\r\n    }\r\n    setIsPermissionModalVisible(true);\r\n  };\r\n\r\n  const closePermissionModal = () => {\r\n    setIsPermissionModalVisible(false);\r\n    setSelectedPermissions({});\r\n    setSelectedRole(null);\r\n  };\r\n\r\n  const savePermissions = async () => {\r\n    if (selectedRole) {\r\n      try {\r\n        await axios.post('http://159.89.167.135:3000/api/admin/setRolePermission', {\r\n          role_id: selectedRole.id,\r\n          permissions: selectedPermissions,\r\n        });\r\n        message.success('Permissions added successfully');\r\n        fetchRoles();\r\n      } catch (error) {\r\n        message.error('Error updating permissions');\r\n      }\r\n    }\r\n    closePermissionModal();\r\n  };\r\n\r\n  const startEditing = (role) => {\r\n    setEditRoleId(role.id);\r\n    setEditRoleName(role.rm_role_name);\r\n  };\r\n\r\n  const filteredRoles = roles.filter(role =>\r\n    role.rm_role_name.toLowerCase().includes(searchQuery.toLowerCase())\r\n  );\r\n\r\n  const columns = [\r\n    {\r\n      title: 'ID',\r\n      dataIndex: 'id',\r\n      key: 'id',\r\n    },\r\n    {\r\n      title: 'Role Name',\r\n      dataIndex: 'rm_role_name',\r\n      key: 'rm_role_name',\r\n      render: (text, record) =>\r\n        editRoleId === record.id ? (\r\n          <Input\r\n            value={editRoleName}\r\n            onChange={(e) => setEditRoleName(e.target.value)}\r\n            onPressEnter={handleUpdateRole}\r\n          />\r\n        ) : (\r\n          text\r\n        ),\r\n    },\r\n    {\r\n      title: 'Actions',\r\n      key: 'actions',\r\n      render: (text, record) =>\r\n        editRoleId === record.id ? (\r\n          <>\r\n            <Button type=\"primary\" onClick={handleUpdateRole} style={{ marginRight: 8 }}>Save</Button>\r\n            <Button onClick={() => setEditRoleId(null)}>Cancel</Button>\r\n          </>\r\n        ) : (\r\n          <>\r\n            {hasPermission(7, 'edit') && (<SettingOutlined\r\n              style={{ fontSize: '20px', marginRight: '8px', cursor: 'pointer' }}\r\n              onClick={() => openPermissionModal(record)}\r\n            />)}\r\n            {hasPermission(7, 'edit') && (<Button type=\"link\" onClick={() => startEditing(record)} style={{ marginRight: 8 }}>\r\n              Edit\r\n            </Button>)}\r\n            {/* {hasPermission(7, 'delete') && (<Button onClick={() => handleDeleteRole(record.id)} danger>\r\n              Delete\r\n            </Button>)} */}\r\n            {hasPermission(7, 'delete') && (\r\n              <Popconfirm title=\"Are you sure to delete this role?\" onConfirm={() => handleDeleteRole(record.id)}>\r\n                <Button type=\"link\" danger>Delete</Button>\r\n              </Popconfirm>\r\n            )}\r\n          </>\r\n        ),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"role-master-container\">\r\n      <div className=\"header\" style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: 16 }}>\r\n        <h2>Role Master</h2>\r\n        <div style={{ display: 'flex', alignItems: 'center' }}>\r\n          <Input\r\n            placeholder=\"Search roles\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n            style={{ marginRight: 16, width: 200, borderRadius: 0 }}\r\n          />\r\n          {hasPermission(7, 'add') && (\r\n            <Button\r\n              type=\"primary\"\r\n              onClick={() => setIsAddRoleModalVisible(true)}\r\n              style={{ borderRadius: 0 }}\r\n            >\r\n              Add Role Master\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n\r\n      <Table\r\n        columns={columns}\r\n        dataSource={filteredRoles}\r\n        rowKey=\"id\"\r\n        pagination={{ pageSize: 10 }}\r\n      />\r\n\r\n      {/* Modal for Adding New Role */}\r\n      <Modal\r\n        title=\"Add New Role\"\r\n        visible={isAddRoleModalVisible}\r\n        onOk={handleAddRole}\r\n        onCancel={() => setIsAddRoleModalVisible(false)}\r\n        okText=\"Add\"\r\n        cancelText=\"Cancel\"\r\n      >\r\n        <Input\r\n          placeholder=\"Enter role name\"\r\n          value={newRoleName}\r\n          onChange={(e) => setNewRoleName(e.target.value)}\r\n        />\r\n      </Modal>\r\n\r\n      {/* Modal for Role Permissions */}\r\n      <Modal\r\n        title={`${selectedRole?.rm_role_name} Permissions`}\r\n        visible={isPermissionModalVisible}\r\n        onOk={savePermissions}\r\n        onCancel={closePermissionModal}\r\n        footer={[\r\n          <Button key=\"cancel\" onClick={closePermissionModal}>\r\n            Cancel\r\n          </Button>,\r\n          <Button key=\"save\" type=\"primary\" onClick={savePermissions}>\r\n            Save\r\n          </Button>,\r\n        ]}\r\n      >\r\n        <table className=\"permissions-table\" style={{ width: '100%' }}>\r\n          <thead>\r\n            <tr style={{ backgroundColor: 'white' }}>\r\n              <th>Permission</th>\r\n              <th>View</th>\r\n              <th>Add</th>\r\n              <th>Edit</th>\r\n              <th>Delete</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {menuList && menuList.length > 0 ? (\r\n              menuList.map((menuItem, index) => (\r\n                <React.Fragment key={index}>\r\n                  <tr style={{ fontWeight: 'bold' }}>\r\n                    <td>{menuItem.name}</td>\r\n                    {[\"view\", \"add\", \"edit\", \"delete\"].map((action) => (\r\n                      <td key={action}>\r\n                        <Checkbox\r\n                          checked={selectedPermissions[menuItem.name]?.[action] || false}\r\n                          onChange={() => handlePermissionChange(menuItem.name, action)}\r\n                        />\r\n                      </td>\r\n                    ))}\r\n                  </tr>\r\n\r\n                  {/* Render submenu items with disabled option if master menu is not selected */}\r\n                  {menuItem.submenu && menuItem.submenu.length > 0 && (\r\n                    menuItem.submenu.map((submenu, subIndex) => (\r\n                      <tr key={`${index}-${subIndex}`}>\r\n                        <td style={{ paddingLeft: '20px' }}>{submenu.name}</td>\r\n                        {[\"view\", \"add\", \"edit\", \"delete\"].map((action) => (\r\n                          <td key={action}>\r\n                            <Checkbox\r\n                              checked={selectedPermissions[submenu.name]?.[action] || false}\r\n                              onChange={() => handlePermissionChange(submenu.name, action, true, menuItem.name)}\r\n                              disabled={!selectedPermissions[menuItem.name]?.view}\r\n                            />\r\n                          </td>\r\n                        ))}\r\n                      </tr>\r\n                    ))\r\n                  )}\r\n                </React.Fragment>\r\n              ))\r\n            ) : (\r\n              <tr>\r\n                <td colSpan=\"5\">No menu items available</td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </Modal>\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RoleMaster;\r\n","// This icon file is generated automatically.\nvar CheckCircleFilled = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z\" } }] }, \"name\": \"check-circle\", \"theme\": \"filled\" };\nexport default CheckCircleFilled;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport CheckCircleFilledSvg from \"@ant-design/icons-svg/es/asn/CheckCircleFilled\";\nimport AntdIcon from '../components/AntdIcon';\nvar CheckCircleFilled = function CheckCircleFilled(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: CheckCircleFilledSvg\n  }));\n};\nCheckCircleFilled.displayName = 'CheckCircleFilled';\nexport default /*#__PURE__*/React.forwardRef(CheckCircleFilled);","// This icon file is generated automatically.\nvar ExclamationCircleFilled = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z\" } }] }, \"name\": \"exclamation-circle\", \"theme\": \"filled\" };\nexport default ExclamationCircleFilled;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport ExclamationCircleFilledSvg from \"@ant-design/icons-svg/es/asn/ExclamationCircleFilled\";\nimport AntdIcon from '../components/AntdIcon';\nvar ExclamationCircleFilled = function ExclamationCircleFilled(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: ExclamationCircleFilledSvg\n  }));\n};\nExclamationCircleFilled.displayName = 'ExclamationCircleFilled';\nexport default /*#__PURE__*/React.forwardRef(ExclamationCircleFilled);","// This icon file is generated automatically.\nvar SettingOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z\" } }] }, \"name\": \"setting\", \"theme\": \"outlined\" };\nexport default SettingOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport SettingOutlinedSvg from \"@ant-design/icons-svg/es/asn/SettingOutlined\";\nimport AntdIcon from '../components/AntdIcon';\nvar SettingOutlined = function SettingOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: SettingOutlinedSvg\n  }));\n};\nSettingOutlined.displayName = 'SettingOutlined';\nexport default /*#__PURE__*/React.forwardRef(SettingOutlined);"],"names":["useState","roles","setRoles","newRoleName","setNewRoleName","editRoleId","setEditRoleId","editRoleName","setEditRoleName","isAddRoleModalVisible","setIsAddRoleModalVisible","isPermissionModalVisible","setIsPermissionModalVisible","menuList","setMenuList","selectedRole","setSelectedRole","selectedPermissions","setSelectedPermissions","permissions","setPermissions","searchQuery","setSearchQuery","useEffect","fetchRoles","loadMenuList","loadPermissions","storedPermissions","JSON","parse","localStorage","getItem","hasPermission","menuId","action","length","permission","find","perm","menu_id","menu","parsedMenu","error","console","warn","axios","response","data","handleAddRole","trim","role_name","message","handleUpdateRole","handleDeleteRole","id","handlePermissionChange","category","isSubmenu","parentCategory","prevPermissions","newPermissions","view","menuItem","name","submenu","forEach","add","edit","delete","openPermissionModal","role","log","closePermissionModal","savePermissions","role_id","filteredRoles","filter","rm_role_name","toLowerCase","includes","columns","title","dataIndex","key","render","text","record","value","onChange","e","target","onPressEnter","type","onClick","style","marginRight","SettingOutlined","fontSize","cursor","onConfirm","danger","className","display","justifyContent","alignItems","marginBottom","placeholder","width","borderRadius","dataSource","rowKey","pagination","pageSize","visible","onOk","onCancel","okText","cancelText","footer","backgroundColor","map","index","fontWeight","checked","subIndex","paddingLeft","disabled","colSpan","CheckCircleFilled","props","ref","React","AntdIcon","_objectSpread","icon","CheckCircleFilledSvg","displayName","ExclamationCircleFilled","ExclamationCircleFilledSvg","SettingOutlinedSvg"],"sourceRoot":""}